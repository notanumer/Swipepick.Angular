{"ast":null,"code":"import { switchMap } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../shared/services/test-api.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function () {\n  return [\"/\"];\n};\nfunction TestPageComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6);\n    i0.ɵɵtext(2, \" \\u0412\\u0430\\u0448 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442 \");\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"a\", 8);\n    i0.ɵɵtext(6, \"\\u0417\\u0410\\u0412\\u0415\\u0420\\u0428\\u0418\\u0422\\u042C\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.result, \"/\", ctx_r3.test.length, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n  }\n}\nfunction TestPageComponent_div_1_ng_template_2_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function TestPageComponent_div_1_ng_template_2_button_6_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const optionIndex_r8 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r9.saveUserResponse(optionIndex_r8));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r7);\n  }\n}\nfunction TestPageComponent_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 10)(3, \"div\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 12);\n    i0.ɵɵtemplate(6, TestPageComponent_div_1_ng_template_2_button_6_Template, 2, 1, \"button\", 13);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r5.test[ctx_r5.questionNumber], \"/\", ctx_r5.test.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.test[ctx_r5.questionNumber].question);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.test[ctx_r5.questionNumber].options);\n  }\n}\nfunction TestPageComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TestPageComponent_div_1_div_1_Template, 7, 4, \"div\", 3);\n    i0.ɵɵtemplate(2, TestPageComponent_div_1_ng_template_2_Template, 7, 4, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(3);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isEnd)(\"ngIfElse\", _r4);\n  }\n}\nfunction TestPageComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelement(1, \"img\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\nexport class TestPageComponent {\n  constructor(route, testService) {\n    this.route = route;\n    this.testService = testService;\n    this.questionNumber = 0;\n    this.isEnd = false;\n    this.answers = [];\n    this.result = '';\n  }\n  ngOnInit() {\n    this.test$ = this.route.params.pipe(switchMap(params => {\n      this.testId = params['id'];\n      return this.testService.getTest(this.testId);\n    }));\n    this.testSubscription = this.test$.subscribe(test => {\n      this.test = test;\n    });\n  }\n  ngOnDestroy() {\n    this.testSubscription.unsubscribe();\n  }\n  saveUserResponse(answer) {\n    this.questionNumber++;\n    this.answers.push({\n      queId: this.test[this.questionNumber].queId,\n      answ: answer\n    });\n    if (this.questionNumber + 1 === this.test.length) {\n      this.isEnd = true;\n      this.testService.submitAnswers({\n        testUri: this.testId,\n        selectedAnsws: this.answers\n      });\n    }\n  }\n}\nTestPageComponent.ɵfac = function TestPageComponent_Factory(t) {\n  return new (t || TestPageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TestApiService));\n};\nTestPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TestPageComponent,\n  selectors: [[\"app-test-page\"]],\n  decls: 4,\n  vars: 2,\n  consts: [[1, \"background\"], [4, \"ngIf\", \"ngIfElse\"], [\"loading\", \"\"], [\"class\", \"result_wrapper\", 4, \"ngIf\", \"ngIfElse\"], [\"question\", \"\"], [1, \"result_wrapper\"], [1, \"text\"], [1, \"result\"], [1, \"button_finish\", 3, \"routerLink\"], [1, \"number\"], [1, \"wrapper\"], [1, \"question\"], [1, \"responses\"], [\"class\", \"response\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"response\", 3, \"click\"], [1, \"loading\"], [\"src\", \"assets/images/loading.gif\", \"alt\", \"loading\"]],\n  template: function TestPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, TestPageComponent_div_1_Template, 4, 2, \"div\", 1);\n      i0.ɵɵtemplate(2, TestPageComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(3);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.test)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i1.RouterLink],\n  styles: [\".background[_ngcontent-%COMP%] {\\r\\n  background-color: #8CACD0;\\r\\n  min-height: 100vh;\\r\\n  padding: 130px 0;\\r\\n}\\r\\n\\r\\n.wrapper[_ngcontent-%COMP%] {\\r\\n  margin: auto;\\r\\n  width: 650px;\\r\\n}\\r\\n\\r\\n.question[_ngcontent-%COMP%] {\\r\\n  background-color: white;\\r\\n  border-radius: 14px;\\r\\n  font-weight: 700;\\r\\n  font-size: 36px;\\r\\n  height: 180px;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding-top: 45px;\\r\\n  border-top: 30px solid;\\r\\n}\\r\\n\\r\\n.responses[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  grid-template-columns: 320px 320px;\\r\\n  gap: 10px;\\r\\n  margin-top: 15px;\\r\\n}\\r\\n\\r\\n\\r\\n.response[_ngcontent-%COMP%] {\\r\\n  background-color: white;\\r\\n  font-family: 'Oswald';\\r\\n  color: #42445A;\\r\\n  font-weight: 700;\\r\\n  font-size: 24px;\\r\\n  border-radius: 14px;\\r\\n  width: 320px;\\r\\n  height: 120px;\\r\\n}\\r\\n\\r\\n.response[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #DDEAEE;\\r\\n}\\r\\n\\r\\n.number[_ngcontent-%COMP%] {\\r\\n  font-weight: 700;\\r\\n  font-size: 36px;\\r\\n  position: fixed;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  margin-top: 15px;\\r\\n  margin-right: 25px;\\r\\n}\\r\\n\\r\\n.result_wrapper[_ngcontent-%COMP%] {\\r\\n  background-color: white;\\r\\n  font-weight: 700;\\r\\n  font-size: 36px;\\r\\n  margin: auto;\\r\\n  width: 450px;\\r\\n  height: 450px;\\r\\n  border-radius: 14px;\\r\\n  display: grid;\\r\\n  grid-template-columns: 450px;\\r\\n  gap: 111px;\\r\\n}\\r\\n\\r\\n.text[_ngcontent-%COMP%] {\\r\\n  margin-top: 15px;\\r\\n  font-weight: 700;\\r\\n  font-size: 56px;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n}\\r\\n\\r\\n.result[_ngcontent-%COMP%] {\\r\\n  margin-top: 60px;\\r\\n  font-size: 82px;\\r\\n}\\r\\n\\r\\n.button_finish[_ngcontent-%COMP%] {\\r\\n  background-color: #42445A;\\r\\n  font-family: 'Oswald';\\r\\n  font-weight: 700;\\r\\n  font-size: 28px;\\r\\n  color: #DDEAEE;\\r\\n  border-radius: 14px;\\r\\n  height: 60px;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding-top: 8px;\\r\\n}\\r\\n\\r\\n.button_finish[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #DDEAEE;\\r\\n  color: #42445A;\\r\\n}\\r\\n\\r\\n.loading[_ngcontent-%COMP%] {\\r\\n  width: 80px;\\r\\n  height: 80px;\\r\\n  margin: auto;\\r\\n  margin-top: 150px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdGVzdC1wYWdlL3Rlc3QtcGFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQXlCO0VBQ3pCLGlCQUFpQjtFQUNqQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osWUFBWTtBQUNkOztBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUNqQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isa0NBQWtDO0VBQ2xDLFNBQVM7RUFDVCxnQkFBZ0I7QUFDbEI7OztBQUdBO0VBQ0UsdUJBQXVCO0VBQ3ZCLHFCQUFxQjtFQUNyQixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixtQkFBbUI7RUFDbkIsWUFBWTtFQUNaLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsZUFBZTtFQUNmLE1BQU07RUFDTixRQUFRO0VBQ1IsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLFlBQVk7RUFDWixZQUFZO0VBQ1osYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsNEJBQTRCO0VBQzVCLFVBQVU7QUFDWjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixjQUFjO0VBQ2QsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixZQUFZO0VBQ1osaUJBQWlCO0FBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLmJhY2tncm91bmQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4Q0FDRDA7XHJcbiAgbWluLWhlaWdodDogMTAwdmg7XHJcbiAgcGFkZGluZzogMTMwcHggMDtcclxufVxyXG5cclxuLndyYXBwZXIge1xyXG4gIG1hcmdpbjogYXV0bztcclxuICB3aWR0aDogNjUwcHg7XHJcbn1cclxuXHJcbi5xdWVzdGlvbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBmb250LXdlaWdodDogNzAwO1xyXG4gIGZvbnQtc2l6ZTogMzZweDtcclxuICBoZWlnaHQ6IDE4MHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIHBhZGRpbmctdG9wOiA0NXB4O1xyXG4gIGJvcmRlci10b3A6IDMwcHggc29saWQ7XHJcbn1cclxuXHJcbi5yZXNwb25zZXMge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAzMjBweCAzMjBweDtcclxuICBnYXA6IDEwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTVweDtcclxufVxyXG5cclxuXHJcbi5yZXNwb25zZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgZm9udC1mYW1pbHk6ICdPc3dhbGQnO1xyXG4gIGNvbG9yOiAjNDI0NDVBO1xyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XHJcbiAgd2lkdGg6IDMyMHB4O1xyXG4gIGhlaWdodDogMTIwcHg7XHJcbn1cclxuXHJcbi5yZXNwb25zZTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0RERUFFRTtcclxufVxyXG5cclxuLm51bWJlciB7XHJcbiAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICBmb250LXNpemU6IDM2cHg7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHRvcDogMDtcclxuICByaWdodDogMDtcclxuICBtYXJnaW4tdG9wOiAxNXB4O1xyXG4gIG1hcmdpbi1yaWdodDogMjVweDtcclxufVxyXG5cclxuLnJlc3VsdF93cmFwcGVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBmb250LXdlaWdodDogNzAwO1xyXG4gIGZvbnQtc2l6ZTogMzZweDtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgd2lkdGg6IDQ1MHB4O1xyXG4gIGhlaWdodDogNDUwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBkaXNwbGF5OiBncmlkO1xyXG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNDUwcHg7XHJcbiAgZ2FwOiAxMTFweDtcclxufVxyXG5cclxuLnRleHQge1xyXG4gIG1hcmdpbi10b3A6IDE1cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICBmb250LXNpemU6IDU2cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbi5yZXN1bHQge1xyXG4gIG1hcmdpbi10b3A6IDYwcHg7XHJcbiAgZm9udC1zaXplOiA4MnB4O1xyXG59XHJcblxyXG4uYnV0dG9uX2ZpbmlzaCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQyNDQ1QTtcclxuICBmb250LWZhbWlseTogJ09zd2FsZCc7XHJcbiAgZm9udC13ZWlnaHQ6IDcwMDtcclxuICBmb250LXNpemU6IDI4cHg7XHJcbiAgY29sb3I6ICNEREVBRUU7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBoZWlnaHQ6IDYwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgcGFkZGluZy10b3A6IDhweDtcclxufVxyXG5cclxuLmJ1dHRvbl9maW5pc2g6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNEREVBRUU7XHJcbiAgY29sb3I6ICM0MjQ0NUE7XHJcbn1cclxuXHJcbi5sb2FkaW5nIHtcclxuICB3aWR0aDogODBweDtcclxuICBoZWlnaHQ6IDgwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIG1hcmdpbi10b3A6IDE1MHB4O1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAGA,SAAkCA,SAAS,QAAO,MAAM;;;;;;;;;;ICDpDC,8BAAyD;IACpCA,2FAAc;IAAAA,8BAAoB;IAAAA,YAA0B;IAAAA,iBAAM;IACrFA,4BAA8C;IAAAA,sEAAS;IAAAA,iBAAI;;;;IADNA,eAA0B;IAA1BA,qEAA0B;IACtDA,eAAoB;IAApBA,uDAAoB;;;;;;IAOzCA,kCAGS;IADDA;MAAA;MAAA;MAAA;MAAA,OAASA,sDAA6B;IAAA,EAAC;IACtCA,YAAU;IAAAA,iBAAS;;;;IAAnBA,eAAU;IAAVA,+BAAU;;;;;IAPvBA,4BAAkB;IAAAA,YAAwC;IAAAA,iBAAI;IAC9DA,+BAAqB;IACGA,YAAiC;IAAAA,iBAAM;IAC7DA,+BAAuB;IACrBA,6FAG4B;IAC9BA,iBAAM;;;;IARUA,eAAwC;IAAxCA,0FAAwC;IAElCA,eAAiC;IAAjCA,iEAAiC;IAE1BA,eAAiC;IAAjCA,oEAAiC;;;;;IAVpEA,2BAAgC;IAC9BA,wEAGM;IACNA,yHAWc;IAChBA,iBAAM;;;;;IAhBEA,eAAa;IAAbA,mCAAa;;;;;IAkBnBA,+BAAqB;IACnBA,0BAAmD;IACrDA,iBAAM;;;ADXV,OAAM,MAAOC,iBAAiB;EAU5BC,YACUC,KAAqB,EACrBC,WAA2B;IAD3B,UAAK,GAALD,KAAK;IACL,gBAAW,GAAXC,WAAW;IARrB,mBAAc,GAAG,CAAC;IAClB,UAAK,GAAG,KAAK;IACb,YAAO,GAAa,EAAE;IACtB,WAAM,GAAW,EAAE;EAMhB;EAEHC,QAAQ;IACN,IAAI,CAACC,KAAK,GAAG,IAAI,CAACH,KAAK,CAACI,MAAM,CAC3BC,IAAI,CAACT,SAAS,CAAEQ,MAAc,IAAI;MACjC,IAAI,CAACE,MAAM,GAAGF,MAAM,CAAC,IAAI,CAAC;MAC1B,OAAO,IAAI,CAACH,WAAW,CAACM,OAAO,CAAC,IAAI,CAACD,MAAM,CAAC;IAC9C,CAAC,CAAC,CAAC;IACL,IAAI,CAACE,gBAAgB,GAAG,IAAI,CAACL,KAAK,CAACM,SAAS,CAAEC,IAAI,IAAI;MACpD,IAAI,CAACA,IAAI,GAAGA,IAAI;IAClB,CAAC,CAAC;EACJ;EAEAC,WAAW;IACT,IAAI,CAACH,gBAAgB,CAACI,WAAW,EAAE;EACrC;EAEAC,gBAAgB,CAACC,MAAc;IAC7B,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;MAChBC,KAAK,EAAE,IAAI,CAACR,IAAI,CAAC,IAAI,CAACK,cAAc,CAAC,CAACG,KAAK;MAC3CC,IAAI,EAAEL;KACP,CAAC;IACF,IAAI,IAAI,CAACC,cAAc,GAAG,CAAC,KAAK,IAAI,CAACL,IAAI,CAACU,MAAM,EAAE;MAChD,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,IAAI,CAACpB,WAAW,CAACqB,aAAa,CAC9B;QACEC,OAAO,EAAE,IAAI,CAACjB,MAAM;QACpBkB,aAAa,EAAE,IAAI,CAACR;OACrB,CACA;;EAEL;;AA7CWlB,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX9BhC,8BAAwB;MACtBA,kEAiBM;MACNA,mHAIc;MAChBA,iBAAM;;;;MAvBEA,eAAY;MAAZA,+BAAY","names":["switchMap","i0","TestPageComponent","constructor","route","testService","ngOnInit","test$","params","pipe","testId","getTest","testSubscription","subscribe","test","ngOnDestroy","unsubscribe","saveUserResponse","answer","questionNumber","answers","push","queId","answ","length","isEnd","submitAnswers","testUri","selectedAnsws","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Swipepick.Angular\\src\\Swipepick.Angular.Web\\ClientApp\\src\\app\\test-page\\test-page.component.ts","D:\\Swipepick.Angular\\src\\Swipepick.Angular.Web\\ClientApp\\src\\app\\test-page\\test-page.component.html"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {TestApiService} from \"../shared/services/test-api.service\";\nimport {ActivatedRoute, Params} from \"@angular/router\";\nimport {Observable, Subscription, switchMap} from \"rxjs\";\nimport {Question, Answer} from \"../shared/interfaces/test-interfaces\";\n\n@Component({\n  selector: 'app-test-page',\n  templateUrl: './test-page.component.html',\n  styleUrls: ['./test-page.component.css'],\n})\nexport class TestPageComponent implements OnInit, OnDestroy{\n  test$!: Observable<Question[]>\n  testId!: string\n  test!: Question[]\n  questionNumber = 0\n  isEnd = false;\n  answers: Answer[] = []\n  result: string = ''\n  testSubscription!: Subscription\n\n  constructor(\n    private route: ActivatedRoute,\n    private testService: TestApiService\n  ) {}\n\n  ngOnInit() {\n    this.test$ = this.route.params\n      .pipe(switchMap((params: Params) => {\n        this.testId = params['id']\n        return this.testService.getTest(this.testId)\n      }))\n    this.testSubscription = this.test$.subscribe((test) => {\n      this.test = test  \n    })\n  }\n\n  ngOnDestroy(): void {\n    this.testSubscription.unsubscribe()\n  }\n\n  saveUserResponse(answer: number) {\n    this.questionNumber++\n    this.answers.push({\n      queId: this.test[this.questionNumber].queId,\n      answ: answer\n    })\n    if (this.questionNumber + 1 === this.test.length) {\n      this.isEnd = true\n      this.testService.submitAnswers(\n      {\n        testUri: this.testId,\n        selectedAnsws: this.answers\n      }\n      )\n    }\n  }\n}\n","<div class=\"background\">\r\n  <div *ngIf=\"test; else loading\">\r\n    <div *ngIf=\"isEnd; else question\" class=\"result_wrapper\">\r\n      <div class=\"text\"> Ваш результат <div class=\"result\">{{result}}/{{test.length}}</div></div>\r\n      <a class=\"button_finish\" [routerLink]=\"['/']\">ЗАВЕРШИТЬ</a>\r\n    </div>\r\n    <ng-template #question>\r\n      <p class=\"number\">{{test[questionNumber]}}/{{test.length}}</p>\r\n      <div class=\"wrapper\">\r\n        <div class=\"question\">{{test[questionNumber].question}}</div>\r\n        <div class=\"responses\">\r\n          <button *ngFor=\"let option of test[questionNumber].options; let optionIndex = index\"\r\n                  class=\"response\"\r\n                  (click)=\"saveUserResponse(optionIndex)\"\r\n                  >{{option}}</button>\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </div>\r\n  <ng-template #loading>\r\n    <div class=\"loading\">\r\n      <img src=\"assets/images/loading.gif\" alt=\"loading\">\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}