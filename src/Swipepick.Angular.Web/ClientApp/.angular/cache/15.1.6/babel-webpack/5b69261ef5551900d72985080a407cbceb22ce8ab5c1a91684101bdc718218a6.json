{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { switchMap } from \"rxjs\";\nlet TestPageComponent = class TestPageComponent {\n  constructor(route, testService) {\n    this.route = route;\n    this.testService = testService;\n    this.questionNumber = 0;\n    this.isEnd = false;\n    this.answers = [];\n    this.result = '';\n  }\n  ngOnInit() {\n    this.test$ = this.route.params.pipe(switchMap(params => {\n      this.testId = params['id'];\n      return this.testService.getTest(this.testId);\n    }));\n    this.testSubscription = this.test$.subscribe(test => {\n      this.test = test;\n    });\n  }\n  ngOnDestroy() {\n    this.testSubscription.unsubscribe();\n  }\n  saveUserResponse(answer) {\n    this.questionNumber++;\n    this.answers.push({\n      queId: this.test[this.questionNumber].queId,\n      answ: answer\n    });\n    if (this.questionNumber + 1 === this.test.length) {\n      this.isEnd = true;\n      this.testService.submitAnswers({\n        testUri: this.testId,\n        selectedAnsws: this.answers\n      });\n    }\n  }\n};\nTestPageComponent = __decorate([Component({\n  selector: 'app-test-page',\n  templateUrl: './test-page.component.html',\n  styleUrls: ['./test-page.component.css']\n})], TestPageComponent);\nexport { TestPageComponent };","map":{"version":3,"mappings":";AAAA,SAAQA,SAAS,QAA0B,eAAe;AAG1D,SAAkCC,SAAS,QAAO,MAAM;AAQjD,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAU5BC,YACUC,KAAqB,EACrBC,WAA2B;IAD3B,UAAK,GAALD,KAAK;IACL,gBAAW,GAAXC,WAAW;IARrB,mBAAc,GAAG,CAAC;IAClB,UAAK,GAAG,KAAK;IACb,YAAO,GAAa,EAAE;IACtB,WAAM,GAAW,EAAE;EAMhB;EAEHC,QAAQ;IACN,IAAI,CAACC,KAAK,GAAG,IAAI,CAACH,KAAK,CAACI,MAAM,CAC3BC,IAAI,CAACR,SAAS,CAAEO,MAAc,IAAI;MACjC,IAAI,CAACE,MAAM,GAAGF,MAAM,CAAC,IAAI,CAAC;MAC1B,OAAO,IAAI,CAACH,WAAW,CAACM,OAAO,CAAC,IAAI,CAACD,MAAM,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEL,IAAI,CAACE,gBAAgB,GAAG,IAAI,CAACL,KAAK,CAACM,SAAS,CAAEC,IAAI,IAAI;MACpD,IAAI,CAACA,IAAI,GAAGA,IAAI;IAClB,CAAC,CAAC;EACJ;EAEAC,WAAW;IACT,IAAI,CAACH,gBAAgB,CAACI,WAAW,EAAE;EACrC;EAEAC,gBAAgB,CAACC,MAAc;IAC7B,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;MAChBC,KAAK,EAAE,IAAI,CAACR,IAAI,CAAC,IAAI,CAACK,cAAc,CAAC,CAACG,KAAK;MAC3CC,IAAI,EAAEL;KACP,CAAC;IACF,IAAI,IAAI,CAACC,cAAc,GAAG,CAAC,KAAK,IAAI,CAACL,IAAI,CAACU,MAAM,EAAE;MAChD,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,IAAI,CAACpB,WAAW,CAACqB,aAAa,CAC9B;QACEC,OAAO,EAAE,IAAI,CAACjB,MAAM;QACpBkB,aAAa,EAAE,IAAI,CAACR;OACrB,CACA;;EAEL;CACD;AA/CYlB,iBAAiB,eAL7BF,SAAS,CAAC;EACT6B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACW7B,iBAAiB,CA+C7B;SA/CYA,iBAAiB","names":["Component","switchMap","TestPageComponent","constructor","route","testService","ngOnInit","test$","params","pipe","testId","getTest","testSubscription","subscribe","test","ngOnDestroy","unsubscribe","saveUserResponse","answer","questionNumber","answers","push","queId","answ","length","isEnd","submitAnswers","testUri","selectedAnsws","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\Swipepick.Angular\\src\\Swipepick.Angular.Web\\ClientApp\\src\\app\\test-page\\test-page.component.ts"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {TestApiService} from \"../shared/services/test-api.service\";\r\nimport {ActivatedRoute, Params} from \"@angular/router\";\r\nimport {Observable, Subscription, switchMap} from \"rxjs\";\r\nimport {Question, Answer} from \"../shared/interfaces/test-interfaces\";\r\n\r\n@Component({\r\n  selector: 'app-test-page',\r\n  templateUrl: './test-page.component.html',\r\n  styleUrls: ['./test-page.component.css'],\r\n})\r\nexport class TestPageComponent implements OnInit, OnDestroy{\r\n  test$!: Observable<Question[]>\r\n  testId!: string\r\n  test!: Question[]\r\n  questionNumber = 0\r\n  isEnd = false;\r\n  answers: Answer[] = []\r\n  result: string = ''\r\n  testSubscription!: Subscription\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private testService: TestApiService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.test$ = this.route.params\r\n      .pipe(switchMap((params: Params) => {\r\n        this.testId = params['id']\r\n        return this.testService.getTest(this.testId)\r\n      }))\r\n\r\n    this.testSubscription = this.test$.subscribe((test) => {\r\n      this.test = test\r\n    })\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.testSubscription.unsubscribe()\r\n  }\r\n\r\n  saveUserResponse(answer: number) {\r\n    this.questionNumber++\r\n    this.answers.push({\r\n      queId: this.test[this.questionNumber].queId,\r\n      answ: answer\r\n    })\r\n    if (this.questionNumber + 1 === this.test.length) {\r\n      this.isEnd = true\r\n      this.testService.submitAnswers(\r\n      {\r\n        testUri: this.testId,\r\n        selectedAnsws: this.answers\r\n      }\r\n      )\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}